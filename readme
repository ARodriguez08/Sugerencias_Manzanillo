#include <LiquidCrystal.h>

// Pines del LCD: RS, E, D4, D5, D6, D7
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

// Pines
const int potPin = A0;
const int ledPin = 9;

void setup() {
    lcd.begin(16, 2);
    pinMode(ledPin, OUTPUT);
}

void loop() {
    // Leer el valor del potenciómetro
    int valorADC = analogRead(potPin); // 0 - 1023

    // Calcular el voltaje (asumiendo que el potenciómetro está conectado a 5V)
    float voltaje = (valorADC * 5.0) / 1023.0;

    // Convertir ADC a porcentaje (0 a 100)
    int porcentaje = map(valorADC, 0, 1023, 0, 100);

    // Convertir porcentaje a valor PWM
    int pwmValue = map(porcentaje, 0, 100, 0, 255); // Usamos 'porcentaje' sin redondear

    analogWrite(ledPin, pwmValue);

    // Mostrar valores en LCD
    lcd.setCursor(0, 0);
    lcd.print("V:");
    lcd.print(voltaje, 2); // Mostrar voltaje con 2 decimales
    lcd.print(" ADC:");
    lcd.print(valorADC);
    lcd.print("    "); // Espacio para limpiar caracteres anteriores

    lcd.setCursor(0, 1);
    lcd.print(porcentaje); // Mostramos 'porcentaje' directamente
    lcd.print("% PWM:"); // Agregando "PWM:" para mayor claridad
    lcd.print(pwmValue);
    lcd.print(" ");

    delay(200);
}
